    <!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Dataset basics &#8212; CoSMo Multivariate Pattern Analysis toolbox 1.0rc1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <script src="_static/documentation_options.js?v=b2dc1058"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Split-half correlation-based MVPA with group analysis" href="ex_splithalf_correlations.html" />
    <link rel="prev" title="Exercises" href="nmsm2019_ex_toc.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ex_splithalf_correlations.html" title="Split-half correlation-based MVPA with group analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nmsm2019_ex_toc.html" title="Exercises"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CoSMoMVPA</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="nmsm2019.html" >NMSM 2019, Noesselt’s lab 3rd Modelling Symposium, University of Magdeburg</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="nmsm2019_ex_toc.html" accesskey="U">Exercises</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Dataset basics</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="dataset-basics">
<h1>Dataset basics<a class="headerlink" href="#dataset-basics" title="Link to this heading">¶</a></h1>
<section id="reading-material">
<h2>Reading material<a class="headerlink" href="#reading-material" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><span id="id1">[<a class="reference internal" href="references.html#id24" title="Oosterhof, N. N., Connolly, A. C., and Haxby, J. V. CoSMoMVPA: multi-modal multivariate pattern analysis of neuroimaging data in Matlab / GNU Octave. Frontiers in Neuroinformatics, 2016. doi:10.3389/fninf.2016.00027.">OCH16</a>]</span> - CoSMoMVPA manuscript</p></li>
<li><p><span id="id2">[<a class="reference internal" href="references.html#id8" title="Hanke, M., Halchenko, Y. O., Sederberg, P. B., Hanson, S. J., Haxby, J. V., and Pollmann, S. PyMVPA: A python toolbox for multivariate pattern analysis of fMRI data. Neuroinformatics, 7(1):37–53, 2009. doi:10.1007/s12021-008-9041-y.">HHS+09a</a>]</span>, <span id="id3">[<a class="reference internal" href="references.html#id9" title="Hanke, M., Halchenko, Y. O., Sederberg, P. B., Olivetti, E., Fründ, I., Rieger, J. W., Herrmann, C. S., Haxby, J. V., Hanson, S. J., and Pollmann, S. PyMVPA: A Unifying Approach to the Analysis of Neuroscientific Data. Frontiers in neuroinformatics, 3:3, 2009.">HHS+09b</a>]</span> - PyMVPA manuscript, which inspired CoSMoMVPA data structures</p></li>
<li><p><span id="id4">[<a class="reference internal" href="references.html#id19" title="Norman, K. A., Polyn, S. M., Detre, G. J., and Haxby, J. V. Beyond mind-reading: multi-voxel pattern analysis of fMRI data. Trends in cognitive sciences, 10(9):424–430, 2006. doi:10.1016/j.tics.2006.07.005.">NPDH06</a>]</span> - an early MVPA review paper</p></li>
</ul>
<section id="fmri-dataset-basics">
<h3>fMRI dataset basics<a class="headerlink" href="#fmri-dataset-basics" title="Link to this heading">¶</a></h3>
</section>
</section>
<section id="make-sure-your-setup-works">
<h2>Make sure your setup works<a class="headerlink" href="#make-sure-your-setup-works" title="Link to this heading">¶</a></h2>
<p>Before loading any data, please make sure that you:</p>
<blockquote>
<div><ul class="simple">
<li><p>have the most recent CoSMoMVPA code (see <a class="reference internal" href="download.html#download"><span class="std std-ref">Download instructions</span></a>).</p></li>
<li><p>have a recent version of the <a class="reference internal" href="download.html#get-tutorial-data"><span class="std std-ref">tutorial data</span></a>.</p></li>
<li><p>have set paths properly in <code class="docutils literal notranslate"><span class="pre">.cosmomvpa.cfg</span></code> (described <a class="reference internal" href="download.html#set-cosmovmpa-cfg"><span class="std std-ref">here</span></a>)</p></li>
<li><p>have <a class="reference internal" href="download.html#test-local-setup"><span class="std std-ref">tested</span></a> that you can load and save data from and to the paths in <code class="docutils literal notranslate"><span class="pre">.cosmomvpa.cfg</span></code>.</p></li>
</ul>
</div></blockquote>
</section>
<section id="very-first-exercise">
<h2>Very first exercise<a class="headerlink" href="#very-first-exercise" title="Link to this heading">¶</a></h2>
<p>We will start with a more complicated analysis first without explaining too much of the rationale now; that is left for later. Briefly, we will run a <em>searchlight analysis</em> using neural data while a participant viewed images of six different categories. The output is an information map that indicates where in the brain the distributed patterns are consistent yet different for the different categories.</p>
<p>In this first exercise, you only have to add one line of code. To do this exercise, open the file linked to by Hint - this is a code <em>skeleton</em> because it has code left out. Make a new file in the Matlab / GNU Octave editor, paste the file contents, and the fill in the missing code.
Run the code and a nifti file will be generated. You can visualize this using <a class="reference external" href="http://www.nitrc.org/projects/mricron">MRIcron</a> or other fMRI data viewers.</p>
<p>Hint: <a class="reference internal" href="matlab/run_fmri_correlation_searchlight_trivial_skl.html#run-fmri-correlation-searchlight-trivial-skl"><span class="std std-ref">run fmri correlation searchlight trivial skl</span></a></p>
<p>Solution: <a class="reference internal" href="matlab/run_fmri_correlation_searchlight_trivial_skl.html#run-fmri-correlation-searchlight-trivial-skl"><span class="std std-ref">run fmri correlation searchlight trivial skl</span></a> / <a class="extlink-pb reference external" href="_static/publish/run_fmri_correlation_searchlight_trivial.html">Matlab output: run_fmri_correlation_searchlight_trivial</a></p>
</section>
<section id="load-and-view-anatomical-dataset">
<h2>Load and view anatomical dataset<a class="headerlink" href="#load-and-view-anatomical-dataset" title="Link to this heading">¶</a></h2>
<p>Before starting this exercise, please make sure you have read about:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-dataset"><span class="std std-ref">Dataset</span></a></p></li>
<li><p><a class="reference internal" href="tips.html#matlab-octave-logical-masking"><span class="std std-ref">Logical masking</span></a></p></li>
</ul>
<p>Using some basic <a class="reference internal" href="matindex.html#matindex"><span class="std std-ref">CoSMoMVPA functions</span></a> we start loading a single NIFTI image of an anatomical scan.
Use the function <a class="reference internal" href="matlab/cosmo_fmri_dataset.html#cosmo-fmri-dataset"><span class="std std-ref">cosmo fmri dataset</span></a> to load the nifti file of the brain of subject s01 (<code class="docutils literal notranslate"><span class="pre">brain.nii</span></code>) and assign the result to a struct ‘ds’. What is contained in this struct?</p>
<p>Make a histogram of all voxels, and a second histogram of the non-zero voxels of the brain. There are two ‘bumps’ - what do they represent?</p>
<p>Display the dataset in sagittal orientation.</p>
<p>Set anterior voxels to zero, and display the result.</p>
<p>Advanced exercise: set all voxels around a center voxel at <code class="docutils literal notranslate"><span class="pre">i=150,j=100,k=50</span></code> within a 40-voxel radius to zero, and display the result.</p>
<p>Hint: <a class="reference internal" href="matlab/run_anatomical_dataset_basics_skl.html#run-anatomical-dataset-basics-skl"><span class="std std-ref">run anatomical dataset basics skl</span></a></p>
<p>Solution: <a class="reference internal" href="matlab/run_anatomical_dataset_basics.html#run-anatomical-dataset-basics"><span class="std std-ref">run anatomical dataset basics</span></a> / <a class="extlink-pb reference external" href="_static/publish/run_anatomical_dataset_basics.html">Matlab output: run_anatomical_dataset_basics</a></p>
<section id="loading-datasets-with-a-mask">
<h3>Loading datasets with a mask<a class="headerlink" href="#loading-datasets-with-a-mask" title="Link to this heading">¶</a></h3>
<p>Before starting this exercise, please make sure you have read about:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-dataset"><span class="std std-ref">Dataset</span></a></p></li>
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-targets"><span class="std std-ref">Targets</span></a></p></li>
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-chunks"><span class="std std-ref">Chunks</span></a></p></li>
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-dataset-operations"><span class="std std-ref">Dataset operations</span></a></p></li>
<li><p><a class="reference internal" href="tips.html#matlab-octave-logical-masking"><span class="std std-ref">Logical masking</span></a></p></li>
</ul>
<p>Before starting any analysis, it is usually necessary to indicate the targets (conditions) and chunks (indicating independence of data; for fRMI data, typically runs) for each row in a dataset’s <code class="docutils literal notranslate"><span class="pre">.samples</span></code> field.</p>
<p>Using the function in <a class="reference internal" href="matlab/cosmo_fmri_dataset.html#cosmo-fmri-dataset"><span class="std std-ref">cosmo fmri dataset</span></a> load the dataset for subject s01
(<code class="docutils literal notranslate"><span class="pre">glm_T_stats_perrun.nii</span></code>).</p>
<ul>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">.sa.targets</span></code>, <code class="docutils literal notranslate"><span class="pre">.sa.chunks</span></code> and <code class="docutils literal notranslate"><span class="pre">.sa.labels</span></code>:</p>
<blockquote>
<div><ul>
<li><p>The stimulus labels for each run of the fMRI study were monkey, lemur, mallard, warbler, ladybug, and lunamoth – in that order. This dataset contains summary statistics (T statistics from the general linear model analysis, GLM) for each stimulus for each of ten runs. The runs are vertically stacked by run. For example, the first row contains the summary voxel-wise responses for monkey in run 1, the second row contains that for lemur in run 1, and the seventh row contains monkey from run 2, etc.</p></li>
<li><p>Add samples attributes (dataset.sa) as follows.</p>
<blockquote>
<div><ul class="simple">
<li><p>numeric labels for the targets,aka stimulus labels, in the samples attribute field dataset.sa.targets</p></li>
<li><p>add another sample attribute for the chunks, aka run labels, in the field dataset.sa.chunks.</p></li>
<li><p>optional: add a third sample attribute with labels (string representation) showing human-readable labels of the conditions.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Load the VT mask, find where there are non-zero values in the mask, and apply it to the dataset using <a class="reference internal" href="matlab/cosmo_slice.html#cosmo-slice"><span class="std std-ref">cosmo slice</span></a>.</p></li>
<li><p>Now use <a class="reference internal" href="matlab/cosmo_fmri_dataset.html#cosmo-fmri-dataset"><span class="std std-ref">cosmo fmri dataset</span></a>  with the <code class="docutils literal notranslate"><span class="pre">mask</span></code>, <code class="docutils literal notranslate"><span class="pre">targets</span></code> and <code class="docutils literal notranslate"><span class="pre">chunks</span></code> parameters; set <code class="docutils literal notranslate"><span class="pre">.sa.labels</span></code> as before, and verify you get the same dataset structure as before.</p></li>
</ul>
<p>Advanced exercise: using <a class="reference internal" href="matlab/cosmo_slice.html#cosmo-slice"><span class="std std-ref">cosmo slice</span></a>, can you show the same figure as in the advanced exercise above where all voxels around a center voxels were set to zero?</p>
<p>Hint: <a class="reference internal" href="matlab/run_dataset_basics_skl.html#run-dataset-basics-skl"><span class="std std-ref">run dataset basics skl</span></a></p>
<p>Solution: <a class="reference internal" href="matlab/run_dataset_basics.html#run-dataset-basics"><span class="std std-ref">run dataset basics</span></a> / <a class="extlink-pb reference external" href="_static/publish/run_dataset_basics.html">Matlab output: run_dataset_basics</a></p>
</section>
<section id="operations-on-datasets">
<h3>Operations on datasets<a class="headerlink" href="#operations-on-datasets" title="Link to this heading">¶</a></h3>
<p>Before starting this exercise, please make sure you have read about:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cosmomvpa_concepts.html#cosmomvpa-dataset-operations"><span class="std std-ref">Dataset operations</span></a></p></li>
</ul>
<p>Now that you are familiar with the dataset, let’s play around a little.</p>
<ul>
<li><p>Load the <code class="docutils literal notranslate"><span class="pre">glm_T_stats_perrun.nii</span></code> data with the VT mask for any subject.</p></li>
<li><p>Slice samples in various ways (using <a class="reference internal" href="matlab/cosmo_slice.html#cosmo-slice"><span class="std std-ref">cosmo slice</span></a>):</p>
<blockquote>
<div><ul class="simple">
<li><p>Get dataset with data in chunks 1 and 2</p></li>
<li><p>Get dataset with data in conditions 1 and 3 (monkeys and mallards)</p></li>
<li><p>Get one dataset with data that has all the primate data (monkey and lemur) and another dataset has only the bugs data (ladybug and lunamoth).</p></li>
<li><p>Calculate the average pattern for primates and the average pattern for bugs.</p></li>
<li><p>Subtract bugs from primates.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Save the result as a dataset.</p></li>
<li><p>Convert the dataset into a nifti format using the function <a class="reference internal" href="matlab/cosmo_map2fmri.html#cosmo-map2fmri"><span class="std std-ref">cosmo map2fmri</span></a>.</p></li>
<li><p>Visualize the results using <code class="docutils literal notranslate"><span class="pre">imagesc</span></code> or <a class="reference internal" href="matlab/cosmo_plot_slices.html#cosmo-plot-slices"><span class="std std-ref">cosmo plot slices</span></a>, or save the nifti as a file and use some other software like AFNI’s or FSL’s viewer.</p></li>
</ul>
<p>Optional exercise: use a whole-brain mask.</p>
<p>Hint: <a class="reference internal" href="matlab/run_operations_on_datasets_skl.html#run-operations-on-datasets-skl"><span class="std std-ref">run operations on datasets skl</span></a></p>
<p>Solution: <a class="reference internal" href="matlab/run_operations_on_datasets.html#run-operations-on-datasets"><span class="std std-ref">run operations on datasets</span></a> / <a class="extlink-pb reference external" href="_static/publish/run_operations_on_datasets.html">Matlab output: run_operations_on_datasets</a></p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cosmomvpa_logo.png" alt="Logo of CoSMo Multivariate Pattern Analysis toolbox"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Dataset basics</a><ul>
<li><a class="reference internal" href="#reading-material">Reading material</a><ul>
<li><a class="reference internal" href="#fmri-dataset-basics">fMRI dataset basics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#make-sure-your-setup-works">Make sure your setup works</a></li>
<li><a class="reference internal" href="#very-first-exercise">Very first exercise</a></li>
<li><a class="reference internal" href="#load-and-view-anatomical-dataset">Load and view anatomical dataset</a><ul>
<li><a class="reference internal" href="#loading-datasets-with-a-mask">Loading datasets with a mask</a></li>
<li><a class="reference internal" href="#operations-on-datasets">Operations on datasets</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="nmsm2019_ex_toc.html"
                          title="previous chapter">Exercises</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ex_splithalf_correlations.html"
                          title="next chapter">Split-half correlation-based MVPA with group analysis</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ex_dataset_basics.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ex_splithalf_correlations.html" title="Split-half correlation-based MVPA with group analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="nmsm2019_ex_toc.html" title="Exercises"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CoSMoMVPA</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="nmsm2019.html" >NMSM 2019, Noesselt’s lab 3rd Modelling Symposium, University of Magdeburg</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="nmsm2019_ex_toc.html" >Exercises</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Dataset basics</a></li> 
      </ul>
    </div>
      <div class="footer">
       <span class="creativecommons">
          <a href="http://opensource.org/licenses/MIT" >
          <img src="_static/mit-license_logo.png"
               border="0" alt="Creative Commons License"/>
         </a> 
         
        <a href="copyright.html">Copyright 2013-2021 Nikolaas N. Oosterhof, Andrew C. Connolly, CoSMoMVPA contributors</a>.
        CoSMoMVPA is licensed under an <a href="http://opensource.org/licenses/MIT">Expat (MIT) License</a>.
       </span>
      </div>
  </body>
</html>